
<h2>Dynamic Form</h2>
    <form [ngFormModel]="dynamicForm">  <!-- (ngSubmit)="save(dynamicForm)" -->
        <material-input label="Contact Type"
                        ngControl="contact_type"
                        floatingLabel
                        autoFocus>
        </material-input>
      <material-input label="Your name"
                      ngControl="name"
                      floatingLabel>
      </material-input>
        <material-input label="Business Name"
                        ngControl="business_name"
                        floatingLabel>
        </material-input>
        <material-input label="Website"
                        ngControl="website"
                        floatingLabel>
        </material-input>


        <div ngControlGroup="addresses">
          <div *ngFor="let addressForm of dynamicForm.controls['addresses'].controls; let i = index">
              Street Address {{ i + 1 }}

              <div [ngControlGroup]="i">
                  <material-input label="Street Address"
                                  ngControl="streetAddress"
                                  floatingLabel
                                  >
                  </material-input>
                  <material-input label="City"
                                  ngControl="city"
                                  floatingLabel>

                  </material-input>
                  <material-input label="State"
                                  ngControl="state"
                                  floatingLabel
                  >
                  </material-input>
                  <material-input label="ZIP Code"
                                  ngControl="zipCode"
                                  floatingLabel
                  >
                  </material-input>
                  <material-button raised
                                   icon
                                   materialTooltip="Remove Address"
                                   (trigger)="removeContactItem('addresses', i)"
                                   *ngIf="dynamicForm.controls['addresses'].controls.length > 1">
                      <glyph icon="delete"></glyph>
                  </material-button>
              </div>
          </div>
            <material-button raised
                             icon
                             materialTooltip="Add Address"
                             (trigger)="addContactItem('addresses')">
                <glyph icon="add_location"></glyph>
            </material-button>
        </div>
        <div ngControlGroup="phone_numbers">
            <div *ngFor="let phoneForm of dynamicForm.controls['phone_numbers'].controls; let i = index">
                Phone {{ i + 1 }}

                <div [ngControlGroup]="i">
                    <material-input label="Phone Number"
                                    ngControl="phone"
                                    floatingLabel
                    >
                    </material-input>
                    <material-input label="Phone Type"
                                    ngControl="phone_type"
                                    floatingLabel>

                    </material-input>
                    <material-button raised
                                     icon
                                     materialTooltip="Remove Phone"
                                     (trigger)="removeContactItem('phone_numbers', i)"
                                     *ngIf="dynamicForm.controls['phone_numbers'].controls.length > 1">
                        <glyph icon="delete"></glyph>
                    </material-button>
                </div>
            </div>
            <material-button raised
                             icon
                             materialTooltip="Add Phone"
                             (trigger)="addContactItem('phone_numbers')">
                <glyph icon="phone"></glyph>
            </material-button>
        </div>
        <div ngControlGroup="emails">
            <div *ngFor="let emailForm of dynamicForm.controls['emails'].controls; let i = index">
                Email {{ i + 1 }}

                <div [ngControlGroup]="i">
                    <material-input label="Email"
                                    ngControl="email"
                                    floatingLabel
                    >
                    </material-input>
                    <material-input label="Email Type"
                                    ngControl="email_type"
                                    floatingLabel>

                    </material-input>
                    <material-button raised
                                     icon
                                     materialTooltip="Remove Email"
                                     (trigger)="removeContactItem('emails', i)"
                                     *ngIf="dynamicForm.controls['emails'].controls.length > 1">
                        <glyph icon="delete"></glyph>
                    </material-button>
                </div>
            </div>
            <material-button raised
                             icon
                             materialTooltip="Add Email"
                             (trigger)="addContactItem('emails')">
                <glyph icon="email"></glyph>
            </material-button>
        </div>
        <material-input label="Notes"
                        ngControl="notes"
                        floatingLabel
                        multiline
                        rows="4">
        </material-input>
      <div footer>
        <material-button raised
                         clear-size
                         class="blue"
                         [disabled]="!dynamicForm.valid"
                         (trigger)=save(dynamicForm)>
          Submit
        </material-button>
          <p>
              Valid: --{{dynamicForm.valid}}--<br />
              Addresses Valid: {{dynamicForm.controls['addresses'].valid}}<br />
          </p>



        <pre>{{debug}}</pre>


      </div>

    </form>
