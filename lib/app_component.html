<h1>My First AngularDart App</h1>

<div class="layout vertical">
    <div>
        Valid: {{sampleForm.valid}}
        Pristine: {{sampleForm.pristine}}
    </div>
    <form [ngFormModel]="sampleForm">
        <div *ngFor="let field of config; let i = index">
            <material-input *ngIf="field['type'] == 'text'"
                            [label]="field['description']"
                            [ngControl]="field['name']"
                            [hintText]="field['help_text']"
                            floatingLabel
                            [autoFocus]="i == 0"> <!-- only autofocus first one -->
            </material-input>

            <div *ngIf="field['type'] == 'select'">
                <label>{{field['description']}}</label><br />
                <select [ngControl]="field['name']">
                    <option *ngFor="let choice of field['choices']" [value]="choice[0]">
                        {{choice[1]}}
                    </option>
                </select>
                <div *ngIf="sampleForm.controls[field['name']].hasError('required')" style="color: #f00;">{{field['description']}} is Required</div>
                <!-- Need to be able to show errors -->
            </div>

            Errors: {{sampleForm.controls[field['name']].errors}}
        </div>

        {{sampleForm.errors}}
        <pre>{{debug}}</pre>
    </form>
</div>
<material-button raised
                 class="blue"
                 [disabled]="!sampleForm.valid"
                 (trigger)="submitForm()">
    Submit
</material-button>



<dynamic-form></dynamic-form>